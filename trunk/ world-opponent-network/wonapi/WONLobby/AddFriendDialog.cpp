#include "AddFriendDialog.h"

#include "WONGUI/Button.h"
#include "WONGUI/GUIConfig.h"
#include "WONGUI/InputBox.h"

using namespace WONAPI;

///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
AddFriendDialog::AddFriendDialog()
{
}

///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
void AddFriendDialog::InitComponent(ComponentInit &theInit)
{
	Dialog::InitComponent(theInit);
	if(theInit.mType==ComponentInitType_ComponentConfig)
	{
		ComponentConfigInit &anInit = (ComponentConfigInit&)theInit;
		ComponentConfig *aConfig = anInit.mConfig;

		WONComponentConfig_Get(aConfig,mNameInput,"NameInput");
		WONComponentConfig_Get(aConfig,mOkButton,"OkButton");
		WONComponentConfig_Get(aConfig,mCancelButton,"CancelButton");
	}
}

///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
void AddFriendDialog::CheckInput()
{
	mOkButton->Enable(!mNameInput->IsEmpty());
}	

///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
const GUIString& AddFriendDialog::GetName()
{
	return mNameInput->GetText();
}

///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
void AddFriendDialog::Reset()
{
	mNameInput->Clear();
	mNameInput->RequestFocus();
}


///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
void AddFriendDialog::HandleComponentEvent(ComponentEvent *theEvent)
{
	if(theEvent->mType==ComponentEvent_InputTextChanged)
		CheckInput();
	else
		Dialog::HandleComponentEvent(theEvent);
}

